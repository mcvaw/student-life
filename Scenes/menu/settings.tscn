[gd_scene load_steps=10 format=2]

[ext_resource path="res://Sprites/icons/checkbox-off.png" type="Texture" id=1]
[ext_resource path="res://Fonts/PressStart_Res/Pixel_font_small.tres" type="DynamicFont" id=2]
[ext_resource path="res://Sprites/icons/checkbox-on.png" type="Texture" id=3]
[ext_resource path="res://Scenes/templates/Button.tscn" type="PackedScene" id=4]

[sub_resource type="GDScript" id=1]
resource_name = "Main"
script/source = "extends Control

# Подписи
export (NodePath) var ost_text
export (NodePath) var fx_text

# Глобальные объекты
onready var ost = $\"/root/ost\"
onready var fx = $\"/root/fx\"


# Обновить текст
func update_text(val : float, obj : String) -> void:
	get_node(obj).text = str(round((val+35)/35*100)) + \"%\"


# Изменение настроек слайдера музыки
func music(delta : int) -> void:
	fx.btn_click()
	ost.volume += delta
	update_text(ost.volume, ost_text)


# Изменение настроек слайдера эффектов
func effects(delta : int) -> void:
	fx.btn_click()
	fx.volume += delta
	update_text(fx.volume, fx_text)


# Сбросить настройки музыки
func reset_music_volume() -> void:
	fx.btn_click()
	ost.volume = 0
	update_text(0, ost_text)


# Сбросить настройки эффектов
func reset_effects_volume() -> void:
	fx.btn_click()
	fx.volume = 0
	update_text(0, fx_text)


# Воспроизведение щелчка при переключении вкладок
func tab_changed(_tab):
	fx.btn_click()


# Синхронизировать интерфейс
func _ready() -> void:
	update_text(fx.volume, fx_text)
	update_text(ost.volume, ost_text)

"

[sub_resource type="StyleBoxFlat" id=2]
content_margin_left = 15.0
content_margin_right = 15.0
content_margin_top = 5.0
bg_color = Color( 0.0588235, 0.0588235, 0.0588235, 1 )

[sub_resource type="StyleBoxFlat" id=3]
content_margin_left = 15.0
content_margin_right = 15.0
content_margin_top = 5.0
bg_color = Color( 0.129412, 0.129412, 0.129412, 1 )

[sub_resource type="StyleBoxFlat" id=4]
bg_color = Color( 0.0605469, 0.0605469, 0.0605469, 1 )
corner_radius_bottom_right = 20
corner_radius_bottom_left = 20

[sub_resource type="GDScript" id=5]
script/source = "extends MarginContainer

# Интерфейс настроек
# Переносит значения настроек в интерфейс
# Содержит функции для обработки нажатия кнопок

export(NodePath) var vsync_toggle
export(NodePath) var fullscreen_toggle
onready var glob = $\"/root/global\"


# Полноэкранный режим
func toggle_fullscreen(state : bool) -> void:
	OS.window_fullscreen = state


# Вертикальная синхронизация
func toggle_vsync(state : bool) -> void:
	OS.vsync_enabled = state


# Синхронизировать интерфейс при загрузке
func _ready() -> void:
	get_node(vsync_toggle).pressed = OS.vsync_enabled
	get_node(fullscreen_toggle).pressed = OS.window_fullscreen
"

[node name="Settings" type="Control"]
size_flags_horizontal = 8
size_flags_vertical = 8
script = SubResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}
ost_text = NodePath("TabContainer/Аудио/Audio/Music/HBoxContainer/Label")
fx_text = NodePath("TabContainer/Аудио/Audio/Effects/HBoxContainer/Label")

[node name="TabContainer" type="TabContainer" parent="."]
margin_right = 791.0
margin_bottom = 476.0
rect_clip_content = true
size_flags_vertical = 3
size_flags_stretch_ratio = 7.0
custom_styles/tab_fg = SubResource( 2 )
custom_styles/tab_bg = SubResource( 3 )
custom_styles/panel = SubResource( 4 )
tab_align = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Аудио" type="MarginContainer" parent="TabContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 42.0
custom_constants/margin_right = 50
custom_constants/margin_top = 50
custom_constants/margin_left = 50
custom_constants/margin_bottom = 50

[node name="Audio" type="VBoxContainer" parent="TabContainer/Аудио"]
margin_left = 50.0
margin_top = 50.0
margin_right = 741.0
margin_bottom = 384.0
custom_constants/separation = 60

[node name="Music" type="VBoxContainer" parent="TabContainer/Аудио/Audio"]
margin_right = 691.0
margin_bottom = 137.0
size_flags_vertical = 3
custom_constants/separation = 25

[node name="Label" type="Label" parent="TabContainer/Аудио/Audio/Music"]
margin_right = 691.0
margin_bottom = 32.0
size_flags_horizontal = 3
size_flags_vertical = 7
text = "Громкость музыки"
align = 1
valign = 1

[node name="HBoxContainer" type="HBoxContainer" parent="TabContainer/Аудио/Audio/Music"]
margin_top = 57.0
margin_right = 691.0
margin_bottom = 137.0
size_flags_vertical = 3
custom_constants/separation = 50

[node name="ResetMusic" parent="TabContainer/Аудио/Audio/Music/HBoxContainer" instance=ExtResource( 4 )]
margin_right = 285.0
rect_min_size = Vector2( 285, 80 )
btn_text = "Сбросить"

[node name="M-" parent="TabContainer/Аудио/Audio/Music/HBoxContainer" instance=ExtResource( 4 )]
margin_left = 335.0
margin_right = 415.0
btn_text = "-"

[node name="Label" type="Label" parent="TabContainer/Аудио/Audio/Music/HBoxContainer"]
margin_left = 465.0
margin_top = 28.0
margin_right = 561.0
margin_bottom = 52.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 2 )
text = "100%"

[node name="M+" parent="TabContainer/Аудио/Audio/Music/HBoxContainer" instance=ExtResource( 4 )]
margin_left = 611.0
margin_right = 691.0
btn_text = "+"

[node name="Effects" type="VBoxContainer" parent="TabContainer/Аудио/Audio"]
margin_top = 197.0
margin_right = 691.0
margin_bottom = 334.0
size_flags_vertical = 3
custom_constants/separation = 25

[node name="Label" type="Label" parent="TabContainer/Аудио/Audio/Effects"]
margin_right = 691.0
margin_bottom = 32.0
size_flags_vertical = 7
text = "Громкость эффектов"
align = 1
valign = 1

[node name="HBoxContainer" type="HBoxContainer" parent="TabContainer/Аудио/Audio/Effects"]
margin_top = 57.0
margin_right = 691.0
margin_bottom = 137.0
size_flags_vertical = 3
custom_constants/separation = 50

[node name="ResetEffects" parent="TabContainer/Аудио/Audio/Effects/HBoxContainer" instance=ExtResource( 4 )]
margin_right = 285.0
rect_min_size = Vector2( 285, 80 )
btn_text = "Сбросить"

[node name="E-" parent="TabContainer/Аудио/Audio/Effects/HBoxContainer" instance=ExtResource( 4 )]
margin_left = 335.0
margin_right = 415.0
btn_text = "-"

[node name="Label" type="Label" parent="TabContainer/Аудио/Audio/Effects/HBoxContainer"]
margin_left = 465.0
margin_top = 28.0
margin_right = 561.0
margin_bottom = 52.0
size_flags_horizontal = 3
custom_fonts/font = ExtResource( 2 )
text = "78%"

[node name="E+" parent="TabContainer/Аудио/Audio/Effects/HBoxContainer" instance=ExtResource( 4 )]
margin_left = 611.0
margin_right = 691.0
btn_text = "+"

[node name="Инфо" type="MarginContainer" parent="TabContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 42.0
custom_constants/margin_right = 50
custom_constants/margin_top = 50
custom_constants/margin_left = 50
custom_constants/margin_bottom = 50

[node name="ScrollContainer" type="ScrollContainer" parent="TabContainer/Инфо"]
margin_left = 50.0
margin_top = 50.0
margin_right = 741.0
margin_bottom = 384.0
size_flags_vertical = 3
scroll_horizontal_enabled = false

[node name="Label" type="Label" parent="TabContainer/Инфо/ScrollContainer"]
margin_right = 691.0
margin_bottom = 872.0
size_flags_horizontal = 3
text = "Student Quest
v 2.3

Последнее важное изменение: новый интерфейс

Авторы:
- mcraw
- friday13

Свяжитесь с нами:
our@mail.com

Пожалуйста, поддержите нас (мы голодные):
btc: ...
eth: ...

Каждый персонаж - это всего лишь плод нашего воображения

(C) 2020"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Графика" type="MarginContainer" parent="TabContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 42.0
custom_constants/margin_right = 50
custom_constants/margin_top = 50
custom_constants/margin_left = 50
custom_constants/margin_bottom = 50
script = SubResource( 5 )
vsync_toggle = NodePath("VBoxContainer/CheckButton")
fullscreen_toggle = NodePath("VBoxContainer/CheckButton2")

[node name="VBoxContainer" type="VBoxContainer" parent="TabContainer/Графика"]
margin_left = 50.0
margin_top = 50.0
margin_right = 741.0
margin_bottom = 384.0

[node name="CheckButton" type="CheckButton" parent="TabContainer/Графика/VBoxContainer"]
margin_right = 1812.0
margin_bottom = 80.0
rect_min_size = Vector2( 0, 80 )
size_flags_horizontal = 3
custom_icons/off = ExtResource( 1 )
custom_icons/on = ExtResource( 3 )
text = "VSYNC"

[node name="CheckButton2" type="CheckButton" parent="TabContainer/Графика/VBoxContainer"]
margin_top = 84.0
margin_right = 1812.0
margin_bottom = 164.0
rect_min_size = Vector2( 0, 80 )
size_flags_horizontal = 3
custom_icons/off = ExtResource( 1 )
custom_icons/on = ExtResource( 3 )
text = "FULLSCREEN"
[connection signal="tab_changed" from="TabContainer" to="." method="tab_changed"]
[connection signal="pressed" from="TabContainer/Аудио/Audio/Music/HBoxContainer/ResetMusic" to="." method="reset_music_volume"]
[connection signal="pressed" from="TabContainer/Аудио/Audio/Music/HBoxContainer/M-" to="." method="music" binds= [ -5 ]]
[connection signal="pressed" from="TabContainer/Аудио/Audio/Music/HBoxContainer/M+" to="." method="music" binds= [ 5 ]]
[connection signal="pressed" from="TabContainer/Аудио/Audio/Effects/HBoxContainer/ResetEffects" to="." method="reset_effects_volume"]
[connection signal="pressed" from="TabContainer/Аудио/Audio/Effects/HBoxContainer/E-" to="." method="effects" binds= [ -5 ]]
[connection signal="pressed" from="TabContainer/Аудио/Audio/Effects/HBoxContainer/E+" to="." method="effects" binds= [ 5 ]]
[connection signal="toggled" from="TabContainer/Графика/VBoxContainer/CheckButton" to="TabContainer/Графика" method="toggle_vsync"]
[connection signal="toggled" from="TabContainer/Графика/VBoxContainer/CheckButton2" to="TabContainer/Графика" method="toggle_fullscreen"]
